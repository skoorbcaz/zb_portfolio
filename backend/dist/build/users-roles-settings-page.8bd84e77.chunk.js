(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[8853],{16098:(B,j,s)=>{"use strict";s.r(j),s.d(j,{default:()=>wn});var t=s(67294),c=s(49656),a=s(68547),u=s(31498),g=s(81912),O=s(29728),A=s(17034),R=s(67838),v=s(36989),y=s(49066),T=s(185),S=s(38939),p=s(8060),h=s(79031),E=s(37909),D=s(63237),M=s(72735),K=s(14087),V=s(96315),Z=s(97132),k=s(23724),te=s(63852),_=s(89031),i=(n,e,r)=>new Promise((d,P)=>{var m=o=>{try{l(r.next(o))}catch(f){P(f)}},b=o=>{try{l(r.throw(o))}catch(f){P(f)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,b);l((r=r.apply(n,e)).next())});const C=(n,e)=>i(void 0,null,function*(){try{const{data:r}=yield _.be.get((0,_.Gc)("roles"));return e("The roles have loaded successfully"),r}catch(r){throw n({type:"warning",message:{id:"notification.error"}}),new Error("error")}}),x=(n,e)=>i(void 0,null,function*(){try{yield _.be.delete(`${(0,_.Gc)("roles")}/${n}`)}catch(r){e({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}});var L=s(45697),U=s.n(L),N=s(12028),G=s(46273),ae=s(15234),re=s(4585),oe=s(20022),ne=Object.defineProperty,W=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,fe=(n,e,r)=>e in n?ne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ee=(n,e)=>{for(var r in e||(e={}))de.call(e,r)&&fe(n,r,e[r]);if(W)for(var r of W(e))q.call(e,r)&&fe(n,r,e[r]);return n};const ue=({sortedRoles:n,canDelete:e,permissions:r,setRoleToDelete:d,onDelete:P})=>{const{formatMessage:m}=(0,Z.useIntl)(),{push:b}=(0,c.useHistory)(),[l,o]=P,f=w=>e&&!["public","authenticated"].includes(w.type),I=w=>{d(w),o(!l)},$=w=>{b(`/settings/${u.Z}/roles/${w}`)};return t.createElement(ae.p,null,n==null?void 0:n.map(w=>t.createElement(h.Tr,ee({key:w.name},(0,a.onRowClick)({fn:()=>$(w.id)})),t.createElement(E.Td,{width:"20%"},t.createElement(M.Z,null,w.name)),t.createElement(E.Td,{width:"50%"},t.createElement(M.Z,null,w.description)),t.createElement(E.Td,{width:"30%"},t.createElement(M.Z,null,`${w.nb_users} ${m({id:"global.users",defaultMessage:"users"}).toLowerCase()}`)),t.createElement(E.Td,null,t.createElement(G.k,ee({justifyContent:"end"},a.stopPropagation),t.createElement(a.CheckPermissions,{permissions:r.updateRole},t.createElement(N.h,{onClick:()=>$(w.id),noBorder:!0,icon:t.createElement(re.Z,null),label:m({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${w.name}`})})),f(w)&&t.createElement(a.CheckPermissions,{permissions:r.deleteRole},t.createElement(N.h,{onClick:()=>I(w.id),noBorder:!0,icon:t.createElement(oe.default,null),label:m({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${w.name}`})})))))))},ve=ue;ue.defaultProps={canDelete:!1},ue.propTypes={onDelete:U().array.isRequired,permissions:U().object.isRequired,setRoleToDelete:U().func.isRequired,sortedRoles:U().array.isRequired,canDelete:U().bool};var Ee=(n,e,r)=>new Promise((d,P)=>{var m=o=>{try{l(r.next(o))}catch(f){P(f)}},b=o=>{try{l(r.throw(o))}catch(f){P(f)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,b);l((r=r.apply(n,e)).next())});const Pe=()=>{const{trackUsage:n}=(0,a.useTracking)(),{formatMessage:e}=(0,Z.useIntl)(),{push:r}=(0,c.useHistory)(),d=(0,a.useNotification)(),{notifyStatus:P}=(0,K.G)(),[{query:m}]=(0,a.useQueryParams)(),b=(m==null?void 0:m._q)||"",[l,o]=(0,t.useState)(!1),[f,I]=(0,t.useState)(!1),[$,w]=(0,t.useState)();(0,a.useFocusWhenNavigate)();const z=(0,k.useQueryClient)(),F=(0,t.useMemo)(()=>({create:g.Z.createRole,read:g.Z.readRoles,update:g.Z.updateRole,delete:g.Z.deleteRole}),[]),{isLoading:X,allowedActions:{canRead:Y,canDelete:ce}}=(0,a.useRBAC)(F),{isLoading:Sn,data:{roles:Le},isFetching:jn}=(0,k.useQuery)("get-roles",()=>C(d,P),{initialData:{},enabled:Y}),Et=Sn||jn,Un=()=>{n("willCreateRole"),r(`/settings/${u.Z}/roles/new`)},Bn=()=>{o(!l)},In={roles:{id:(0,_.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,_.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},_n=e({id:"global.roles",defaultMessage:"Roles"}),Zn=(0,k.useMutation)(Gn=>x(Gn,d),{onSuccess(){return Ee(this,null,function*(){yield z.invalidateQueries("get-roles")})}}),$n=()=>Ee(void 0,null,function*(){I(!0),yield Zn.mutateAsync($),o(!l),I(!1)}),ge=(0,te.ZP)(Le||[],b,{keys:["name","description"]}),Nn=b&&!ge.length?"search":"roles",Fn=4,Kn=((Le==null?void 0:Le.length)||0)+1;return t.createElement(A.A,null,t.createElement(a.SettingsPageTitle,{name:_n}),t.createElement(T.o,{"aria-busy":Et},t.createElement(R.T,{title:e({id:"global.roles",defaultMessage:"Roles"}),subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:t.createElement(a.CheckPermissions,{permissions:g.Z.createRole},t.createElement(O.z,{onClick:Un,startIcon:t.createElement(V.default,null),size:"S"},e({id:(0,_.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),t.createElement(v.Z,{startActions:t.createElement(a.SearchURLQuery,{label:e({id:"app.component.search.label",defaultMessage:"Search"})})}),t.createElement(y.D,null,!Y&&t.createElement(a.NoPermissions,null),(Et||X)&&t.createElement(a.LoadingIndicatorPage,null),Y&&ge&&(ge==null?void 0:ge.length)?t.createElement(S.i,{colCount:Fn,rowCount:Kn},t.createElement(p.h,null,t.createElement(h.Tr,null,t.createElement(E.Th,null,t.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.name",defaultMessage:"Name"}))),t.createElement(E.Th,null,t.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.description",defaultMessage:"Description"}))),t.createElement(E.Th,null,t.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.users",defaultMessage:"Users"}))),t.createElement(E.Th,null,t.createElement(D.T,null,e({id:"global.actions",defaultMessage:"Actions"}))))),t.createElement(ve,{sortedRoles:ge,canDelete:ce,permissions:g.Z,setRoleToDelete:w,onDelete:[l,o]})):t.createElement(a.EmptyStateLayout,{content:In[Nn]})),t.createElement(a.ConfirmDialog,{isConfirmButtonLoading:f,onConfirm:$n,onToggleDialog:Bn,isOpen:l})))},Ae=()=>t.createElement(a.CheckPagePermissions,{permissions:g.Z.accessRoles},t.createElement(Pe,null));var ye=s(80831),H=s(7681),Q=s(35961),he=s(16364),me=s(64256),Oe=s(67109),we=s(85018),be=s(11276),se=s(74571),ie=s(84757),J=s(96486);const Se=(0,t.createContext)({}),je=({children:n,value:e})=>t.createElement(Se.Provider,{value:e},n),Te=()=>(0,t.useContext)(Se);je.propTypes={children:U().node.isRequired,value:U().object.isRequired};var Re=s(27821),Pt=s(35161),yt=s.n(Pt),ht=s(13217),Ot=s.n(ht);const bt=n=>{switch(n){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Rt=(0,Re.default)(Q.x)`
  margin: -1px;
  border-radius: ${({theme:n})=>n.spaces[1]} 0 0 ${({theme:n})=>n.spaces[1]};
`;function xe({route:n}){const{formatMessage:e}=(0,Z.useIntl)(),{method:r,handler:d,path:P}=n,m=P?Ot()(P.split("/")):[],[b="",l=""]=d?d.split("."):[],o=bt(n.method);return t.createElement(H.K,{spacing:2},t.createElement(M.Z,{variant:"delta",as:"h3"},e({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",t.createElement("span",null,b),t.createElement(M.Z,{variant:"delta",textColor:"primary600"},".",l)),t.createElement(H.K,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",spacing:0},t.createElement(Rt,{background:o.background,borderColor:o.border,padding:2},t.createElement(M.Z,{fontWeight:"bold",textColor:o.text},r)),t.createElement(Q.x,{paddingLeft:2,paddingRight:2},yt()(m,f=>t.createElement(M.Z,{key:f,textColor:f.includes(":")?"neutral600":"neutral900"},"/",f)))))}xe.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},xe.propTypes={route:U().shape({handler:U().string,method:U().string,path:U().string})};const Ct=xe,Dt=()=>{const{formatMessage:n}=(0,Z.useIntl)(),{selectedAction:e,routes:r}=Te(),d=(0,J.without)(e.split("."),"controllers"),P=(0,J.get)(r,d[0]),m=d.slice(1).join("."),b=(0,J.isEmpty)(P)?[]:P.filter(l=>l.handler.endsWith(m));return t.createElement(se.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},e?t.createElement(H.K,{spacing:2},b.map((l,o)=>t.createElement(Ct,{key:o,route:l}))):t.createElement(H.K,{spacing:2},t.createElement(M.Z,{variant:"delta",as:"h3"},n({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),t.createElement(M.Z,{as:"p",textColor:"neutral600"},n({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var At=s(48734),Tt=s(74756),xt=s(63081),Lt=s(11700),Mt=s.n(Lt);function wt(n){switch(n){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return Mt()(n.replace("api::","").replace("plugin::",""))}}const St=wt;var jt=s(89734),Ue=s.n(jt),Be=s(36213),Ut=s(78114);const Ie=Re.css`
  background: ${n=>n.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Bt=(0,Re.default)(Q.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${n=>n.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${n=>n.isActive&&Ie}
  &:hover {
    ${Ie}
  }
`,It=Re.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:n})=>n.colors.neutral150};
`,_e=({subCategory:n})=>{const{formatMessage:e}=(0,Z.useIntl)(),{onChange:r,onChangeSelectAll:d,onSelectedAction:P,selectedAction:m,modifiedData:b}=Te(),l=(0,t.useMemo)(()=>(0,J.get)(b,n.name,{}),[b,n]),o=(0,t.useMemo)(()=>Object.values(l).every(w=>w.enabled===!0),[l]),f=(0,t.useMemo)(()=>Object.values(l).some(w=>w.enabled===!0)&&!o,[l,o]),I=(0,t.useCallback)(({target:{name:w}})=>{d({target:{name:w,value:!o}})},[o,d]),$=(0,t.useCallback)(w=>m===w,[m]);return t.createElement(Q.x,null,t.createElement(G.k,{justifyContent:"space-between",alignItems:"center"},t.createElement(Q.x,{paddingRight:4},t.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},n.label)),t.createElement(It,null),t.createElement(Q.x,{paddingLeft:4},t.createElement(Be.X,{name:n.name,value:o,onValueChange:w=>I({target:{name:n.name,value:w}}),indeterminate:f},e({id:"app.utils.select-all",defaultMessage:"Select all"})))),t.createElement(G.k,{paddingTop:6,paddingBottom:6},t.createElement(be.r,{gap:2,style:{flex:1}},n.actions.map(w=>{const z=`${w.name}.enabled`;return t.createElement(se.P,{col:6,key:w.name},t.createElement(Bt,{isActive:$(w.name),padding:2,hasRadius:!0},t.createElement(Be.X,{value:(0,J.get)(b,z,!1),name:z,onValueChange:F=>r({target:{name:z,value:F}})},w.label),t.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>P(w.name),style:{display:"inline-flex",alignItems:"center"}},t.createElement(Ut.Z,null))))}))))};_e.propTypes={subCategory:U().object.isRequired};const _t=_e;var Zt=Object.defineProperty,$t=Object.defineProperties,Nt=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,$e=(n,e,r)=>e in n?Zt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Gt=(n,e)=>{for(var r in e||(e={}))Ft.call(e,r)&&$e(n,r,e[r]);if(Ze)for(var r of Ze(e))Kt.call(e,r)&&$e(n,r,e[r]);return n},Wt=(n,e)=>$t(n,Nt(e));const Ne=({name:n,permissions:e})=>{const r=(0,t.useMemo)(()=>Ue()(Object.values(e.controllers).reduce((d,P,m)=>{const b=`${n}.controllers.${Object.keys(e.controllers)[m]}`,l=Ue()(Object.keys(P).reduce((o,f)=>[...o,Wt(Gt({},P[f]),{label:f,name:`${b}.${f}`})],[]),"label");return[...d,{actions:l,label:Object.keys(e.controllers)[m],name:b}]},[]),"label"),[n,e]);return t.createElement(Q.x,{padding:6},r.map(d=>t.createElement(_t,{key:d.name,subCategory:d})))};Ne.propTypes={name:U().string.isRequired,permissions:U().object.isRequired};const zt=Ne;var Vt=Object.defineProperty,kt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Ke=(n,e,r)=>e in n?Vt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Yt=(n,e)=>{for(var r in e||(e={}))Qt.call(e,r)&&Ke(n,r,e[r]);if(Fe)for(var r of Fe(e))Xt.call(e,r)&&Ke(n,r,e[r]);return n},Jt=(n,e)=>kt(n,Ht(e));const qt=(n,e)=>{const r=Object.keys(e).sort().map(d=>({name:d,isOpen:!1}));return Jt(Yt({},n),{collapses:r})};var Ce=s(18172),er=Object.defineProperty,tr=Object.defineProperties,rr=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,nr=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,We=(n,e,r)=>e in n?er(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ze=(n,e)=>{for(var r in e||(e={}))nr.call(e,r)&&We(n,r,e[r]);if(Ge)for(var r of Ge(e))sr.call(e,r)&&We(n,r,e[r]);return n},Ve=(n,e)=>tr(n,rr(e));const ar={collapses:[]},or=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"TOGGLE_COLLAPSE":{r.collapses=n.collapses.map((d,P)=>P===e.index?Ve(ze({},d),{isOpen:!d.isOpen}):Ve(ze({},d),{isOpen:!1}));break}default:return r}}),ir=()=>{const{modifiedData:n}=Te(),{formatMessage:e}=(0,Z.useIntl)(),[{collapses:r},d]=(0,t.useReducer)(or,ar,m=>qt(m,n)),P=m=>d({type:"TOGGLE_COLLAPSE",index:m});return t.createElement(H.K,{spacing:1},r.map((m,b)=>t.createElement(At.U,{expanded:m.isOpen,onToggle:()=>P(b),key:m.name,variant:b%2===0?"secondary":void 0},t.createElement(Tt.B,{title:St(m.name),description:e({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:m.name}),variant:b%2?"primary":"secondary"}),t.createElement(xt.v,null,t.createElement(Q.x,null,t.createElement(zt,{permissions:n[m.name],name:m.name}))))))};var lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,He=(n,e,r)=>e in n?lr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,mr=(n,e)=>{for(var r in e||(e={}))ur.call(e,r)&&He(n,r,e[r]);if(ke)for(var r of ke(e))pr.call(e,r)&&He(n,r,e[r]);return n},gr=(n,e)=>cr(n,dr(e));const fr={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},vr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"ON_CHANGE":{const d=e.keys.length,P=e.keys[d-1]==="enabled";if(e.value&&P){const m=(0,J.take)(e.keys,d-1).join(".");r.selectedAction=m}(0,J.set)(r,["modifiedData",...e.keys],e.value);break}case"ON_CHANGE_SELECT_ALL":{const d=["modifiedData",...e.keys],P=(0,J.get)(n,d,{}),m=Object.keys(P).reduce((b,l)=>(b[l]=gr(mr({},P[l]),{enabled:e.value}),b),{});(0,J.set)(r,d,m);break}case"ON_RESET":{r.modifiedData=n.initialData;break}case"ON_SUBMIT_SUCCEEDED":{r.initialData=n.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:d}=e;r.selectedAction=d===n.selectedAction?"":d;break}default:return r}});var Er=Object.defineProperty,Pr=Object.defineProperties,yr=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Xe=(n,e,r)=>e in n?Er(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,br=(n,e)=>{for(var r in e||(e={}))hr.call(e,r)&&Xe(n,r,e[r]);if(Qe)for(var r of Qe(e))Or.call(e,r)&&Xe(n,r,e[r]);return n},Rr=(n,e)=>Pr(n,yr(e));const Cr=(n,e,r)=>Rr(br({},n),{initialData:e,modifiedData:e,routes:r});var Dr=Object.defineProperty,Ar=Object.defineProperties,Tr=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Je=(n,e,r)=>e in n?Dr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Mr=(n,e)=>{for(var r in e||(e={}))xr.call(e,r)&&Je(n,r,e[r]);if(Ye)for(var r of Ye(e))Lr.call(e,r)&&Je(n,r,e[r]);return n},wr=(n,e)=>Ar(n,Tr(e));const qe=(0,t.forwardRef)(({permissions:n,routes:e},r)=>{const{formatMessage:d}=(0,Z.useIntl)(),[P,m]=(0,t.useReducer)(vr,fr,I=>Cr(I,n,e));(0,t.useImperativeHandle)(r,()=>({getPermissions(){return{permissions:P.modifiedData}},resetForm(){m({type:"ON_RESET"})},setFormAfterSubmit(){m({type:"ON_SUBMIT_SUCCEEDED"})}}));const b=({target:{name:I,value:$}})=>m({type:"ON_CHANGE",keys:I.split("."),value:$==="empty__string_value"?"":$}),l=({target:{name:I,value:$}})=>m({type:"ON_CHANGE_SELECT_ALL",keys:I.split("."),value:$}),o=I=>m({type:"SELECT_ACTION",actionToSelect:I}),f=wr(Mr({},P),{onChange:b,onChangeSelectAll:l,onSelectedAction:o});return t.createElement(je,{value:f},t.createElement(be.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},t.createElement(se.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(H.K,{spacing:6},t.createElement(H.K,{spacing:2},t.createElement(M.Z,{variant:"delta",as:"h2"},d({id:(0,ie.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),t.createElement(M.Z,{as:"p",textColor:"neutral600"},d({id:(0,ie.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),t.createElement(ir,null))),t.createElement(Dt,null)))});qe.propTypes={permissions:U().object.isRequired,routes:U().object.isRequired};const et=(0,t.memo)(qe),Yn={isLoading:!0,modifiedData:{}},Jn=(n,e)=>produce(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.modifiedData={};break}case"GET_DATA_SUCCEEDED":{r.isLoading=!1,r.modifiedData=e.data;break}case"GET_DATA_ERROR":{r.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{r.modifiedData=e.data;break}default:return r}}),qn=null;var Sr=s(25108),jr=(n,e,r)=>new Promise((d,P)=>{var m=o=>{try{l(r.next(o))}catch(f){P(f)}},b=o=>{try{l(r.throw(o))}catch(f){P(f)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,b);l((r=r.apply(n,e)).next())});const es=(n,e)=>{const{isLoading:r,allowedActions:d}=useRBAC(e),[{isLoading:P,modifiedData:m},b]=useReducer(reducer,initialState),l=useNotification(),o=useRef(!0),f=new AbortController,{signal:I}=f;useEffect(()=>(r||(()=>jr(void 0,null,function*(){try{b({type:"GET_DATA"});const z=yield request(getRequestURL(n),{method:"GET",signal:I});b({type:"GET_DATA_SUCCEEDED",data:z})}catch(z){o.current&&(b({type:"GET_DATA_ERROR"}),Sr.error(z),l({type:"warning",message:{id:"notification.error"}}))}}))(),()=>{f.abort(),o.current=!1}),[r,n]);const $=useCallback(w=>{b({type:"ON_SUBMIT_SUCCEEDED",data:w})},[]);return{allowedActions:d,dispatchSubmitSucceeded:$,isLoading:P,isLoadingForPermissions:r,modifiedData:m}},ts=null;var Ur=Object.defineProperty,Br=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,_r=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,rt=(n,e,r)=>e in n?Ur(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,$r=(n,e)=>{for(var r in e||(e={}))_r.call(e,r)&&rt(n,r,e[r]);if(tt)for(var r of tt(e))Zr.call(e,r)&&rt(n,r,e[r]);return n},Nr=(n,e)=>Br(n,Ir(e));const rs=(n,e)=>Nr($r({},n),{isLoading:e}),ns=null,ss={roles:[],isLoading:!0},as=(n,e)=>produce(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.roles=[];break}case"GET_DATA_SUCCEEDED":{r.roles=e.data,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}default:return r}}),os=null;var Fr=(n,e,r)=>new Promise((d,P)=>{var m=o=>{try{l(r.next(o))}catch(f){P(f)}},b=o=>{try{l(r.throw(o))}catch(f){P(f)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,b);l((r=r.apply(n,e)).next())});const is=(n=!0)=>{const[{roles:e,isLoading:r},d]=useReducer(reducer,initialState,()=>init(initialState,n)),P=useNotification(),m=useRef(!0),b=new AbortController,{signal:l}=b;useEffect(()=>(n&&o(),()=>{b.abort(),m.current=!1}),[n]);const o=()=>Fr(void 0,null,function*(){try{d({type:"GET_DATA"});const{roles:f}=yield request(`/${pluginId}/roles`,{method:"GET",signal:l});d({type:"GET_DATA_SUCCEEDED",data:f})}catch(f){const I=get(f,["response","payload","message"],"An error occured");m.current&&(d({type:"GET_DATA_ERROR"}),I!=="Forbidden"&&P({type:"warning",message:I}))}});return{roles:e,isLoading:r,getData:o}},ls=null;var Kr=Object.defineProperty,Gr=Object.defineProperties,Wr=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,st=(n,e,r)=>e in n?Kr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,kr=(n,e)=>{for(var r in e||(e={}))zr.call(e,r)&&st(n,r,e[r]);if(nt)for(var r of nt(e))Vr.call(e,r)&&st(n,r,e[r]);return n},Hr=(n,e)=>Gr(n,Wr(e));const Qr=(n,e)=>Hr(kr({},n),{isLoading:e});var De=s(46979);const at={permissions:{},routes:{},isLoading:!0},Xr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.permissions={},r.routes={};break}case"GET_DATA_SUCCEEDED":{r.permissions=e.permissions,r.routes=e.routes,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}default:return r}});var ot=(n,e,r)=>new Promise((d,P)=>{var m=o=>{try{l(r.next(o))}catch(f){P(f)}},b=o=>{try{l(r.throw(o))}catch(f){P(f)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,b);l((r=r.apply(n,e)).next())});const it=(n=!0)=>{const e=(0,a.useNotification)(),[{permissions:r,routes:d,isLoading:P},m]=(0,t.useReducer)(Xr,at,()=>Qr(at,n)),b=(0,t.useCallback)(()=>ot(void 0,null,function*(){try{m({type:"GET_DATA"});const[{permissions:l},{routes:o}]=yield Promise.all([`/${u.Z}/permissions`,`/${u.Z}/routes`].map(f=>ot(void 0,null,function*(){return(yield De.Z.get(f)).data})));m({type:"GET_DATA_SUCCEEDED",permissions:(0,_.YX)(l),routes:o})}catch(l){const o=(0,J.get)(l,["response","payload","message"],"An error occured");m({type:"GET_DATA_ERROR"}),o!=="Forbidden"&&e({type:"warning",message:o})}}),[e]);return(0,t.useEffect)(()=>{n&&b()},[b,n]),{permissions:r,routes:d,getData:b,isLoading:P}},Yr={role:{},isLoading:!0},Jr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"GET_DATA_SUCCEEDED":{r.role=e.role,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{r.role.name=e.name,r.role.description=e.description;break}default:return r}});var qr=s(25108),en=Object.defineProperty,tn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,ct=(n,e,r)=>e in n?en(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,dt=(n,e)=>{for(var r in e||(e={}))nn.call(e,r)&&ct(n,r,e[r]);if(lt)for(var r of lt(e))sn.call(e,r)&&ct(n,r,e[r]);return n},an=(n,e)=>tn(n,rn(e)),on=(n,e,r)=>new Promise((d,P)=>{var m=o=>{try{l(r.next(o))}catch(f){P(f)}},b=o=>{try{l(r.throw(o))}catch(f){P(f)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,b);l((r=r.apply(n,e)).next())});const ln=n=>{const[e,r]=(0,t.useReducer)(Jr,Yr),d=(0,a.useNotification)(),P=(0,t.useRef)(null);(0,t.useEffect)(()=>(P.current=!0,n?m(n):r({type:"GET_DATA_SUCCEEDED",role:{}}),()=>P.current=!1),[n]);const m=l=>on(void 0,null,function*(){try{const{data:{role:o}}=yield De.Z.get(`/${u.Z}/roles/${l}`);P.current&&r({type:"GET_DATA_SUCCEEDED",role:o})}catch(o){qr.error(o),r({type:"GET_DATA_ERROR"}),d({type:"warning",message:{id:"notification.error"}})}}),b=(0,t.useCallback)(l=>{r(dt({type:"ON_SUBMIT_SUCCEEDED"},l))},[]);return an(dt({},e),{onSubmitSucceeded:b})};var le=s(53209);const cn=le.Ry().shape({name:le.Z_().required(a.translatedErrors.required),description:le.Z_().required(a.translatedErrors.required)});var dn=s(25108),un=Object.defineProperty,pn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,pt=(n,e,r)=>e in n?un(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,mt=(n,e)=>{for(var r in e||(e={}))gn.call(e,r)&&pt(n,r,e[r]);if(ut)for(var r of ut(e))fn.call(e,r)&&pt(n,r,e[r]);return n},vn=(n,e)=>pn(n,mn(e)),En=(n,e,r)=>new Promise((d,P)=>{var m=o=>{try{l(r.next(o))}catch(f){P(f)}},b=o=>{try{l(r.throw(o))}catch(f){P(f)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,b);l((r=r.apply(n,e)).next())});const Pn=()=>{const{formatMessage:n}=(0,Z.useIntl)(),[e,r]=(0,t.useState)(!1),d=(0,a.useNotification)(),{lockApp:P,unlockApp:m}=(0,a.useOverlayBlocker)(),{params:{id:b}}=(0,c.useRouteMatch)(`/settings/${u.Z}/roles/:id`),{isLoading:l,routes:o}=it(),{role:f,onSubmitSucceeded:I,isLoading:$}=ln(b),w=(0,t.useRef)(),z=F=>En(void 0,null,function*(){P(),r(!0);try{const X=w.current.getPermissions();yield De.Z.put(`/${u.Z}/roles/${b}`,vn(mt(mt({},F),X),{users:[]})),I({name:F.name,description:F.description}),d({type:"success",message:{id:(0,ie.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(X){dn.error(X),d({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}r(!1),m()});return $?t.createElement(a.LoadingIndicatorPage,null):t.createElement(T.o,null,t.createElement(a.SettingsPageTitle,{name:"Roles"}),t.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:f.name,description:f.description},onSubmit:z,validationSchema:cn},({handleSubmit:F,values:X,handleChange:Y,errors:ce})=>t.createElement(a.Form,{noValidate:!0,onSubmit:F},t.createElement(R.T,{primaryAction:!l&&t.createElement(O.z,{disabled:f.code==="strapi-super-admin",type:"submit",loading:e,startIcon:t.createElement(we.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:f.name,subtitle:f.description,navigationAction:t.createElement(a.Link,{startIcon:t.createElement(Oe.Z,null),to:"/settings/users-permissions/roles"},n({id:"global.back",defaultMessage:"Back"}))}),t.createElement(y.D,null,t.createElement(H.K,{spacing:7},t.createElement(Q.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(H.K,{spacing:4},t.createElement(M.Z,{variant:"delta",as:"h2"},n({id:(0,ie.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),t.createElement(be.r,{gap:4},t.createElement(se.P,{col:6},t.createElement(he.o,{name:"name",value:X.name||"",onChange:Y,label:n({id:"global.name",defaultMessage:"Name"}),error:ce.name?n({id:ce.name,defaultMessage:"Invalid value"}):null})),t.createElement(se.P,{col:6},t.createElement(me.g,{name:"description",value:X.description||"",onChange:Y,label:n({id:"global.description",defaultMessage:"Description"}),error:ce.description?n({id:ce.description,defaultMessage:"Invalid value"}):null}))))),!l&&t.createElement(et,{ref:w,permissions:f.permissions,routes:o}))))))},yn=()=>t.createElement(a.CheckPagePermissions,{permissions:g.Z.updateRole},t.createElement(Pn,null)),hn=le.Ry().shape({name:le.Z_().required(a.translatedErrors.required),description:le.Z_().required(a.translatedErrors.required)});var On=s(25108),bn=Object.defineProperty,Rn=Object.defineProperties,Cn=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,Dn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,ft=(n,e,r)=>e in n?bn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,vt=(n,e)=>{for(var r in e||(e={}))Dn.call(e,r)&&ft(n,r,e[r]);if(gt)for(var r of gt(e))An.call(e,r)&&ft(n,r,e[r]);return n},Tn=(n,e)=>Rn(n,Cn(e)),xn=(n,e,r)=>new Promise((d,P)=>{var m=o=>{try{l(r.next(o))}catch(f){P(f)}},b=o=>{try{l(r.throw(o))}catch(f){P(f)}},l=o=>o.done?d(o.value):Promise.resolve(o.value).then(m,b);l((r=r.apply(n,e)).next())});const Ln=()=>{const{formatMessage:n}=(0,Z.useIntl)(),[e,r]=(0,t.useState)(!1),d=(0,a.useNotification)(),{goBack:P}=(0,c.useHistory)(),{lockApp:m,unlockApp:b}=(0,a.useOverlayBlocker)(),{isLoading:l,permissions:o,routes:f}=it(),{trackUsage:I}=(0,a.useTracking)(),$=(0,t.useRef)(),w=z=>xn(void 0,null,function*(){m(),r(!0);try{const F=$.current.getPermissions();yield De.Z.post(`/${u.Z}/roles`,Tn(vt(vt({},z),F),{users:[]})),I("didCreateRole"),d({type:"success",message:{id:(0,ie.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),P()}catch(F){On.error(F),d({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}r(!1),b()});return t.createElement(T.o,null,t.createElement(a.SettingsPageTitle,{name:"Roles"}),t.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:w,validationSchema:hn},({handleSubmit:z,values:F,handleChange:X,errors:Y})=>t.createElement(a.Form,{noValidate:!0,onSubmit:z},t.createElement(R.T,{primaryAction:!l&&t.createElement(O.z,{type:"submit",loading:e,startIcon:t.createElement(we.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:n({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:n({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),t.createElement(y.D,null,t.createElement(H.K,{spacing:7},t.createElement(Q.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(H.K,{spacing:4},t.createElement(M.Z,{variant:"delta",as:"h2"},n({id:(0,ie.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),t.createElement(be.r,{gap:4},t.createElement(se.P,{col:6},t.createElement(he.o,{name:"name",value:F.name||"",onChange:X,label:n({id:"global.name",defaultMessage:"Name"}),error:Y.name?n({id:Y.name,defaultMessage:"Invalid value"}):null})),t.createElement(se.P,{col:6},t.createElement(me.g,{name:"description",value:F.description||"",onChange:X,label:n({id:"global.description",defaultMessage:"Description"}),error:Y.description?n({id:Y.description,defaultMessage:"Invalid value"}):null}))))),!l&&t.createElement(et,{ref:$,permissions:o,routes:f}))))))},Mn=()=>t.createElement(a.CheckPagePermissions,{permissions:g.Z.createRole},t.createElement(Ln,null)),wn=()=>t.createElement(a.CheckPagePermissions,{permissions:g.Z.accessRoles},t.createElement(c.Switch,null,t.createElement(c.Route,{path:`/settings/${u.Z}/roles/new`,component:Mn,exact:!0}),t.createElement(c.Route,{path:`/settings/${u.Z}/roles/:id`,component:yn,exact:!0}),t.createElement(c.Route,{path:`/settings/${u.Z}/roles`,component:Ae,exact:!0}),t.createElement(c.Route,{path:"",component:a.NotFound})))},46979:(B,j,s)=>{"use strict";s.d(j,{Z:()=>A});var t=s(9669),c=s.n(t),a=s(68547),u=s.n(a),g=(R,v,y)=>new Promise((T,S)=>{var p=D=>{try{E(y.next(D))}catch(M){S(M)}},h=D=>{try{E(y.throw(D))}catch(M){S(M)}},E=D=>D.done?T(D.value):Promise.resolve(D.value).then(p,h);E((y=y.apply(R,v)).next())});const O=c().create({baseURL:""});O.interceptors.request.use(R=>g(void 0,null,function*(){return R.headers={Authorization:`Bearer ${a.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},R}),R=>{Promise.reject(R)}),O.interceptors.response.use(R=>R,R=>{var v;throw((v=R.response)==null?void 0:v.status)===401&&(a.auth.clearAppStorage(),window.location.reload()),R});const A=O},89031:(B,j,s)=>{"use strict";s.d(j,{be:()=>t.Z,YX:()=>u,Gc:()=>A,OB:()=>R.Z});var t=s(46979),c=s(96486);const u=v=>Object.keys(v).reduce((y,T)=>{const S=v[T].controllers,p=Object.keys(S).reduce((h,E)=>((0,c.isEmpty)(S[E])||(h[E]=S[E]),h),{});return(0,c.isEmpty)(p)||(y[T]={controllers:p}),y},{});var g=s(31498);const A=v=>`/${g.Z}/${v}`;var R=s(84757)},89881:(B,j,s)=>{var t=s(47816),c=s(99291),a=c(t);B.exports=a},69199:(B,j,s)=>{var t=s(89881),c=s(98612);function a(u,g){var O=-1,A=c(u)?Array(u.length):[];return t(u,function(R,v,y){A[++O]=g(R,v,y)}),A}B.exports=a},82689:(B,j,s)=>{var t=s(29932),c=s(97786),a=s(67206),u=s(69199),g=s(71131),O=s(7518),A=s(85022),R=s(6557),v=s(1469);function y(T,S,p){S.length?S=t(S,function(D){return v(D)?function(M){return c(M,D.length===1?D[0]:D)}:D}):S=[R];var h=-1;S=t(S,O(a));var E=u(T,function(D,M,K){var V=t(S,function(Z){return Z(D)});return{criteria:V,index:++h,value:D}});return g(E,function(D,M){return A(D,M,p)})}B.exports=y},71131:B=>{function j(s,t){var c=s.length;for(s.sort(t);c--;)s[c]=s[c].value;return s}B.exports=j},26393:(B,j,s)=>{var t=s(33448);function c(a,u){if(a!==u){var g=a!==void 0,O=a===null,A=a===a,R=t(a),v=u!==void 0,y=u===null,T=u===u,S=t(u);if(!y&&!S&&!R&&a>u||R&&v&&T&&!y&&!S||O&&v&&T||!g&&T||!A)return 1;if(!O&&!R&&!S&&a<u||S&&g&&A&&!O&&!R||y&&g&&A||!v&&A||!T)return-1}return 0}B.exports=c},85022:(B,j,s)=>{var t=s(26393);function c(a,u,g){for(var O=-1,A=a.criteria,R=u.criteria,v=A.length,y=g.length;++O<v;){var T=t(A[O],R[O]);if(T){if(O>=y)return T;var S=g[O];return T*(S=="desc"?-1:1)}}return a.index-u.index}B.exports=c},99291:(B,j,s)=>{var t=s(98612);function c(a,u){return function(g,O){if(g==null)return g;if(!t(g))return a(g,O);for(var A=g.length,R=u?A:-1,v=Object(g);(u?R--:++R<A)&&O(v[R],R,v)!==!1;);return g}}B.exports=c},35161:(B,j,s)=>{var t=s(29932),c=s(67206),a=s(69199),u=s(1469);function g(O,A){var R=u(O)?t:a;return R(O,c(A,3))}B.exports=g},89734:(B,j,s)=>{var t=s(21078),c=s(82689),a=s(5976),u=s(16612),g=a(function(O,A){if(O==null)return[];var R=A.length;return R>1&&u(O,A[0],A[1])?A=[]:R>2&&u(A[0],A[1],A[2])&&(A=[A[0]]),c(O,t(A,1),[])});B.exports=g},13217:(B,j,s)=>{var t=s(14259);function c(a){var u=a==null?0:a.length;return u?t(a,1,u):[]}B.exports=c},48734:(B,j,s)=>{"use strict";s.d(j,{U:()=>S,y:()=>y});var t=s(67294),c=s(45697),a=s(27821),u=s(72735),g=s(13819),O=s(41762),A=s(35961),R=s(46273);const v=({theme:p,expanded:h,variant:E,disabled:D,error:M})=>M?`1px solid ${p.colors.danger600} !important`:D?`1px solid ${p.colors.neutral150}`:h?`1px solid ${p.colors.primary600}`:E==="primary"?`1px solid ${p.colors.neutral0}`:`1px solid ${p.colors.neutral100}`,y=(0,a.default)(u.Z)``,T=(0,a.default)(A.x)`
  border: ${v};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:p})=>p.colors.primary600};

    ${y} {
      color: ${({theme:p,expanded:h})=>h?void 0:p.colors.primary700};
    }

    ${u.Z} {
      color: ${({theme:p,expanded:h})=>h?void 0:p.colors.primary600};
    }

    & > ${R.k} {
      background: ${({theme:p})=>p.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:p})=>p.colors.primary200};
    }
  }
`,S=({children:p,expanded:h,id:E,size:D,variant:M,disabled:K,error:V,hasErrorMessage:Z,onToggle:k,toggle:te})=>{const _=(0,O.M)("accordion",E);return t.createElement(g.S.Provider,{value:{expanded:h,onToggle:k,toggle:te,id:_,size:D,variant:M,disabled:K}},t.createElement(T,{"data-strapi-expanded":h,disabled:K,"aria-disabled":K,expanded:h,hasRadius:!0,variant:M,error:V},p),V&&Z&&t.createElement(A.x,{paddingTop:1},t.createElement(u.Z,{variant:"pi",textColor:"danger600"},V)))};S.defaultProps={disabled:!1,error:void 0,expanded:!1,hasErrorMessage:!0,id:void 0,toggle:void 0,size:"M",variant:"primary",onToggle:void 0},S.propTypes={children:c.node.isRequired,disabled:c.bool,error:c.string,expanded:c.bool,hasErrorMessage:c.bool,id:c.string,onToggle:c.func,size:c.oneOf(["S","M"]),toggle:c.func,variant:c.oneOf(["primary","secondary"])}},63081:(B,j,s)=>{"use strict";s.d(j,{v:()=>S});var t=s(67294),c=s(45697),a=s(13819),u=s(35961),g=Object.defineProperty,O=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,v=(p,h,E)=>h in p?g(p,h,{enumerable:!0,configurable:!0,writable:!0,value:E}):p[h]=E,y=(p,h)=>{for(var E in h||(h={}))A.call(h,E)&&v(p,E,h[E]);if(O)for(var E of O(h))R.call(h,E)&&v(p,E,h[E]);return p},T=(p,h)=>{var E={};for(var D in p)A.call(p,D)&&h.indexOf(D)<0&&(E[D]=p[D]);if(p!=null&&O)for(var D of O(p))h.indexOf(D)<0&&R.call(p,D)&&(E[D]=p[D]);return E};const S=p=>{var h=p,{children:E}=h,D=T(h,["children"]);const{expanded:M,id:K}=(0,a.A)();if(!M)return null;const V=`accordion-content-${K}`,Z=`accordion-label-${K}`,k=`accordion-desc-${K}`;return t.createElement(u.x,y({role:"region",id:V,"aria-labelledby":Z,"aria-describedby":k},D),E)};S.propTypes={children:c.node.isRequired}},13819:(B,j,s)=>{"use strict";s.d(j,{A:()=>a,S:()=>c});var t=s(67294);const c=(0,t.createContext)(),a=()=>(0,t.useContext)(c)},74756:(B,j,s)=>{"use strict";s.d(j,{B:()=>_});var t=s(67294),c=s(45697),a=s(12645),u=s(27821),g=s(39785),O=s(72735),A=s(48734),R=s(13819),v=s(46273),y=s(7681),T=s(52624);const S=({expanded:i,disabled:C,variant:x})=>{let L;return i?L="primary100":C?L="neutral150":x==="primary"?L="neutral0":L="neutral100",L};var p=s(25108),h=Object.defineProperty,E=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,K=(i,C,x)=>C in i?h(i,C,{enumerable:!0,configurable:!0,writable:!0,value:x}):i[C]=x,V=(i,C)=>{for(var x in C||(C={}))D.call(C,x)&&K(i,x,C[x]);if(E)for(var x of E(C))M.call(C,x)&&K(i,x,C[x]);return i},Z=(i,C)=>{var x={};for(var L in i)D.call(i,L)&&C.indexOf(L)<0&&(x[L]=i[L]);if(i!=null&&E)for(var L of E(i))C.indexOf(L)<0&&M.call(i,L)&&(x[L]=i[L]);return x};const k=(0,u.default)(g.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:i,expanded:C})=>C?i.colors.primary600:i.colors.neutral500};
    }
  }
`,te=(0,u.default)(v.k)`
  min-height: ${({theme:i,size:C})=>i.sizes.accordions[C]};
  border-radius: ${({theme:i,expanded:C})=>C?`${i.borderRadius} ${i.borderRadius} 0 0`:i.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:i})=>i.colors.primary600};
      }
    }
  }
`,_=i=>{var C=i,{title:x,description:L,as:U,togglePosition:N,action:G}=C,ae=Z(C,["title","description","as","togglePosition","action"]);const re=(0,t.useRef)(null),{onToggle:oe,toggle:ne,expanded:W,id:de,size:q,variant:fe,disabled:ee}=(0,R.A)(),ue=`accordion-content-${de}`,ve=`accordion-label-${de}`,Ee=`accordion-desc-${de}`,pe=q==="M"?6:4,Pe=q==="M"?pe:pe-2,Me=S({expanded:W,disabled:ee,variant:fe}),Ae={as:U,fontWeight:q==="S"?"bold":void 0,id:ve,textColor:W?"primary600":"neutral700",ellipsis:!0,variant:q==="M"?"delta":void 0},ye=W?"primary600":"neutral600",H=W?"primary200":"neutral200",Q=q==="M"?`${32/16}rem`:`${24/16}rem`,he=()=>{ee||(ne&&!oe?(p.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),ne()):oe())},me=t.createElement(v.k,{justifyContent:"center",borderRadius:"50%",height:Q,width:Q,transform:W?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,disabled:ee,"aria-hidden":!0,as:"span",background:H,cursor:ee?"not-allowed":"pointer",onClick:()=>{var Oe;return(Oe=re==null?void 0:re.current)==null?void 0:Oe.click()},shrink:0},t.createElement(T.J,{as:a.default,width:q==="M"?`${11/16}rem`:`${8/16}rem`,color:W?"primary600":"neutral600"}));return t.createElement(te,{paddingBottom:Pe,paddingLeft:pe,paddingRight:pe,paddingTop:Pe,background:Me,expanded:W,size:q,justifyContent:"space-between",cursor:ee?"not-allowed":""},t.createElement(y.K,{horizontal:!0,spacing:3,flex:1,maxWidth:"100%"},N==="left"&&me,t.createElement(k,V({ref:re,onClick:he,"aria-disabled":ee,"aria-expanded":W,"aria-controls":ue,"aria-labelledby":ve,"data-strapi-accordion-toggle":!0,expanded:W,type:"button",flex:1,minWidth:0},ae),t.createElement(t.Fragment,null,t.createElement(A.y,V({},Ae),x),L&&t.createElement(O.Z,{as:"p",id:Ee,textColor:ye},L))),N==="right"&&t.createElement(y.K,{horizontal:!0,spacing:3},me,G),N==="left"&&G))};_.defaultProps={action:void 0,as:"span",description:void 0,variant:"primary",togglePosition:"right"},_.propTypes={action:c.node,as:c.string,description:c.string,title:c.string.isRequired,togglePosition:c.oneOf(["right","left"]),variant:c.oneOf(["primary","secondary"])}},36989:(B,j,s)=>{"use strict";s.d(j,{Z:()=>R});var t=s(67294),c=s(45697),a=s(27821),u=s(35961),g=s(46273);const O=(0,a.default)(g.k)`
  & > * + * {
    margin-left: ${({theme:v})=>v.spaces[2]};
  }

  margin-left: ${({pullRight:v})=>v?"auto":void 0};
`,A=(0,a.default)(O)`
  flex-shrink: 0;
`,R=({startActions:v,endActions:y})=>v||y?t.createElement(u.x,{paddingLeft:10,paddingRight:10},t.createElement(u.x,{paddingBottom:4},t.createElement(g.k,{justifyContent:"space-between",alignItems:"flex-start"},v&&t.createElement(O,{wrap:"wrap"},v),y&&t.createElement(A,{pullRight:!0},y)))):null;R.defaultProps={endActions:void 0,startActions:void 0},R.propTypes={endActions:c.node,startActions:c.node}},49066:(B,j,s)=>{"use strict";s.d(j,{D:()=>u});var t=s(67294),c=s(45697),a=s(35961);const u=({children:g})=>t.createElement(a.x,{paddingLeft:10,paddingRight:10},g);u.propTypes={children:c.node.isRequired}},67838:(B,j,s)=>{"use strict";s.d(j,{T:()=>k});var t=s(67294),c=s(27821),a=s(45697),u=s(72735),g=s(35961),O=s(46273);const A=i=>{const C=(0,t.useRef)(null),[x,L]=(0,t.useState)(!0),U=([N])=>{L(N.isIntersecting)};return(0,t.useEffect)(()=>{const N=C.current,G=new IntersectionObserver(U,i);return N&&G.observe(C.current),()=>{N&&G.disconnect()}},[C,i]),[C,x]};var R=s(98402);const v=(i,C)=>{const x=(0,R.useCallbackRef)(C);(0,t.useLayoutEffect)(()=>{const L=new ResizeObserver(x);return Array.isArray(i)?i.forEach(U=>{U.current&&L.observe(U.current)}):i.current&&L.observe(i.current),()=>{L.disconnect()}},[i,x])};var y=Object.defineProperty,T=Object.defineProperties,S=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,D=(i,C,x)=>C in i?y(i,C,{enumerable:!0,configurable:!0,writable:!0,value:x}):i[C]=x,M=(i,C)=>{for(var x in C||(C={}))h.call(C,x)&&D(i,x,C[x]);if(p)for(var x of p(C))E.call(C,x)&&D(i,x,C[x]);return i},K=(i,C)=>T(i,S(C)),V=(i,C)=>{var x={};for(var L in i)h.call(i,L)&&C.indexOf(L)<0&&(x[L]=i[L]);if(i!=null&&p)for(var L of p(i))C.indexOf(L)<0&&E.call(i,L)&&(x[L]=i[L]);return x};const Z=()=>{const i=(0,t.useRef)(null),[C,x]=(0,t.useState)(null),[L,U]=A({root:null,rootMargin:"0px",threshold:0});return v(L,()=>{L.current&&x(L.current.getBoundingClientRect())}),(0,t.useEffect)(()=>{i.current&&x(i.current.getBoundingClientRect())},[i]),{containerRef:L,isVisible:U,baseHeaderLayoutRef:i,headerSize:C}},k=i=>{const{containerRef:C,isVisible:x,baseHeaderLayoutRef:L,headerSize:U}=Z();return t.createElement(t.Fragment,null,t.createElement("div",{style:{height:U==null?void 0:U.height},ref:C},x&&t.createElement(_,M({ref:L},i))),!x&&t.createElement(_,K(M({},i),{sticky:!0,width:U==null?void 0:U.width})))};k.displayName="HeaderLayout";const te=(0,c.default)(g.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${i=>i.width}px;
  z-index: 4;
  box-shadow: ${({theme:i})=>i.shadows.tableShadow};
`,_=t.forwardRef((i,C)=>{var x=i,{navigationAction:L,primaryAction:U,secondaryAction:N,subtitle:G,title:ae,sticky:re,width:oe}=x,ne=V(x,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const W=typeof G=="string";return re?t.createElement(te,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:oe,"data-strapi-header-sticky":!0},t.createElement(O.k,{justifyContent:"space-between"},t.createElement(O.k,null,L&&t.createElement(g.x,{paddingRight:3},L),t.createElement(g.x,null,t.createElement(u.Z,M({variant:"beta",as:"h1"},ne),ae),W?t.createElement(u.Z,{variant:"pi",textColor:"neutral600"},G):G),N?t.createElement(g.x,{paddingLeft:4},N):null),t.createElement(O.k,null,U?t.createElement(g.x,{paddingLeft:2},U):void 0))):t.createElement(g.x,{ref:C,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:L?6:8,background:"neutral100","data-strapi-header":!0},L?t.createElement(g.x,{paddingBottom:2},L):null,t.createElement(O.k,{justifyContent:"space-between"},t.createElement(O.k,null,t.createElement(u.Z,M({as:"h1",variant:"alpha"},ne),ae),N?t.createElement(g.x,{paddingLeft:4},N):null),U),W?t.createElement(u.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},G):G)});_.displayName="BaseHeaderLayout",_.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},_.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,sticky:a.bool,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired,width:a.number},k.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},k.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired}},185:(B,j,s)=>{"use strict";s.d(j,{o:()=>S});var t=s(67294),c=s(45697),a=s(27821),u=Object.defineProperty,g=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,R=(p,h,E)=>h in p?u(p,h,{enumerable:!0,configurable:!0,writable:!0,value:E}):p[h]=E,v=(p,h)=>{for(var E in h||(h={}))O.call(h,E)&&R(p,E,h[E]);if(g)for(var E of g(h))A.call(h,E)&&R(p,E,h[E]);return p},y=(p,h)=>{var E={};for(var D in p)O.call(p,D)&&h.indexOf(D)<0&&(E[D]=p[D]);if(p!=null&&g)for(var D of g(p))h.indexOf(D)<0&&A.call(p,D)&&(E[D]=p[D]);return E};const T=a.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,S=p=>{var h=p,{labelledBy:E}=h,D=y(h,["labelledBy"]);const M=E||"main-content-title";return t.createElement(T,v({"aria-labelledby":M,id:"main-content",tabIndex:-1},D))};S.defaultProps={labelledBy:void 0},S.propTypes={labelledBy:c.string}},67109:(B,j,s)=>{"use strict";s.d(j,{Z:()=>R});var t=s(67294),c=Object.defineProperty,a=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,O=(v,y,T)=>y in v?c(v,y,{enumerable:!0,configurable:!0,writable:!0,value:T}):v[y]=T,A=(v,y)=>{for(var T in y||(y={}))u.call(y,T)&&O(v,T,y[T]);if(a)for(var T of a(y))g.call(y,T)&&O(v,T,y[T]);return v};function R(v){return t.createElement("svg",A({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v),t.createElement("path",{d:"M24 13.3a.2.2 0 01-.2.2H5.74l8.239 8.239a.2.2 0 010 .282L12.14 23.86a.2.2 0 01-.282 0L.14 12.14a.2.2 0 010-.282L11.86.14a.2.2 0 01.282 0L13.98 1.98a.2.2 0 010 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6z",fill:"#212134"}))}},78114:(B,j,s)=>{"use strict";s.d(j,{Z:()=>R});var t=s(67294),c=Object.defineProperty,a=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,O=(v,y,T)=>y in v?c(v,y,{enumerable:!0,configurable:!0,writable:!0,value:T}):v[y]=T,A=(v,y)=>{for(var T in y||(y={}))u.call(y,T)&&O(v,T,y[T]);if(a)for(var T of a(y))g.call(y,T)&&O(v,T,y[T]);return v};function R(v){return t.createElement("svg",A({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 00-.374.68v1.65a.797.797 0 00.384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 00.216.744l1.167 1.166a.801.801 0 00.744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 00.679.374h1.649a.797.797 0 00.686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 00.744-.216l1.166-1.167a.803.803 0 00.216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 00.374-.679v-1.649a.796.796 0 00-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 00-.216-.744l-1.166-1.173a.802.802 0 00-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 00-.68-.374h-1.65a.797.797 0 00-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 00-.744.216L2.921 4.094a.802.802 0 00-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8zM12 17a5 5 0 100-10 5 5 0 000 10z",fill:"#212134"}))}}}]);
