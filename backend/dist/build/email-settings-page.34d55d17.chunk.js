"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[1495],{82781:(U,L,t)=>{t.r(L),t.d(L,{default:()=>oe});var e=t(67294),x=t(97132),s=t(96486),u=t(68547),f=t(185),M=t(49066),R=t(7681),I=t(35961),b=t(11276),m=t(74571),y=t(72735),D=t(16364),c=t(29728),p=t(14087),g=t(23293),S=t(45697),A=t.n(S),G=t(27821),Y=t(91216),J=t(82562),o=t(47560);const Q=G.default.a`
  color: ${({theme:n})=>n.colors.primary600};
`,j=({config:n})=>{const{formatMessage:v}=(0,x.useIntl)();return e.createElement(R.K,{spacing:4},e.createElement(R.K,{spacing:1},e.createElement(y.Z,{variant:"delta",as:"h2"},v({id:(0,o.Z)("Settings.email.plugin.title.config"),defaultMessage:"Configuration"})),e.createElement(y.Z,null,v({id:(0,o.Z)("Settings.email.plugin.text.configuration"),defaultMessage:"The plugin is configured through the {file} file, checkout this {link} for the documentation."},{file:"./config/plugins.js",link:e.createElement(Q,{href:"https://docs.strapi.io/developer-docs/latest/plugins/email.html",target:"_blank",rel:"noopener noreferrer"},v({id:(0,o.Z)("link"),defaultMessage:"Link"}))}))),e.createElement(b.r,{gap:5},e.createElement(m.P,{col:6,s:12},e.createElement(D.o,{name:"shipper-email",label:v({id:(0,o.Z)("Settings.email.plugin.label.defaultFrom"),defaultMessage:"Default sender email"}),placeholder:v({id:(0,o.Z)("Settings.email.plugin.placeholder.defaultFrom"),defaultMessage:"ex: Strapi No-Reply '<'no-reply@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:n.settings.defaultFrom})),e.createElement(m.P,{col:6,s:12},e.createElement(D.o,{name:"response-email",label:v({id:(0,o.Z)("Settings.email.plugin.label.defaultReplyTo"),defaultMessage:"Default response email"}),placeholder:v({id:(0,o.Z)("Settings.email.plugin.placeholder.defaultReplyTo"),defaultMessage:"ex: Strapi '<'example@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:n.settings.defaultReplyTo})),e.createElement(m.P,{col:6,s:12},e.createElement(Y.P,{name:"email-provider",label:v({id:(0,o.Z)("Settings.email.plugin.label.provider"),defaultMessage:"Email provider"}),disabled:!0,onChange:()=>{},value:n.provider},e.createElement(J.W,{value:n.provider},n.provider)))))};j.propTypes={config:A().shape({provider:A().string,settings:A().shape({defaultFrom:A().string,defaultReplyTo:A().string})}).isRequired};const a=j;var l=t(53209);const i=l.Ry().shape({email:l.Z_().email(u.translatedErrors.email).required(u.translatedErrors.required)});var E=t(61321),C=t(9669),Z=t.n(C),N=(n,v,h)=>new Promise((P,B)=>{var F=d=>{try{O(h.next(d))}catch(T){B(T)}},w=d=>{try{O(h.throw(d))}catch(T){B(T)}},O=d=>d.done?P(d.value):Promise.resolve(d.value).then(F,w);O((h=h.apply(n,v)).next())});const z=Z().create({baseURL:""});z.interceptors.request.use(n=>N(void 0,null,function*(){return n.headers={Authorization:`Bearer ${u.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},n}),n=>{Promise.reject(n)}),z.interceptors.response.use(n=>n,n=>{var v;throw((v=n.response)==null?void 0:v.status)===401&&(u.auth.clearAppStorage(),window.location.reload()),n});const V=z;var W=(n,v,h)=>new Promise((P,B)=>{var F=d=>{try{O(h.next(d))}catch(T){B(T)}},w=d=>{try{O(h.throw(d))}catch(T){B(T)}},O=d=>d.done?P(d.value):Promise.resolve(d.value).then(F,w);O((h=h.apply(n,v)).next())});const $=()=>W(void 0,null,function*(){const{data:n}=yield V.get("/email/settings");return n.config}),ne=n=>W(void 0,null,function*(){yield V.post("/email/test",n)});var le=t(67838);const X=()=>{const{formatMessage:n}=(0,x.useIntl)();return e.createElement(e.Fragment,null,e.createElement(u.SettingsPageTitle,{name:n({id:(0,o.Z)("Settings.email.plugin.title"),defaultMessage:"Configuration"})}),e.createElement(le.T,{id:"title",title:n({id:(0,o.Z)("Settings.email.plugin.title"),defaultMessage:"Configuration"}),subtitle:n({id:(0,o.Z)("Settings.email.plugin.subTitle"),defaultMessage:"Test the settings for the Email plugin"})}))};var ie=(n,v,h)=>new Promise((P,B)=>{var F=d=>{try{O(h.next(d))}catch(T){B(T)}},w=d=>{try{O(h.throw(d))}catch(T){B(T)}},O=d=>d.done?P(d.value):Promise.resolve(d.value).then(F,w);O((h=h.apply(n,v)).next())});const re=()=>e.createElement(u.CheckPagePermissions,{permissions:E.Z.settings},e.createElement(se,null)),se=()=>{var n,v;const h=(0,u.useNotification)(),{formatMessage:P}=(0,x.useIntl)(),{lockApp:B,unlockApp:F}=(0,u.useOverlayBlocker)(),{notifyStatus:w}=(0,p.G)();(0,u.useFocusWhenNavigate)();const[O,d]=(0,e.useState)({}),[T,q]=(0,e.useState)(!1),[_,ee]=(0,e.useState)(!1),[H,te]=(0,e.useState)(""),[de,ae]=(0,e.useState)(!1),[ce,ue]=(0,e.useState)({provider:"",settings:{defaultFrom:"",defaultReplyTo:"",testAddress:""}});(0,e.useEffect)(()=>{q(!0),$().then(K=>{w(P({id:(0,o.Z)("Settings.email.plugin.notification.data.loaded"),defaultMessage:"Email settings data has been loaded"})),ue(K);const k=(0,s.get)(K,"settings.testAddress");k&&te(k)}).catch(()=>h({type:"warning",message:P({id:(0,o.Z)("Settings.email.plugin.notification.config.error"),defaultMessage:"Failed to retrieve the email config"})})).finally(()=>q(!1))},[P,h,w]),(0,e.useEffect)(()=>{O.email&&document.querySelector("#test-address-input").focus()},[O]),(0,e.useEffect)(()=>{i.validate({email:H},{abortEarly:!1}).then(()=>ae(!0)).catch(()=>ae(!1))},[H]);const pe=K=>{te(()=>K.target.value)},me=K=>ie(void 0,null,function*(){K.preventDefault();try{yield i.validate({email:H},{abortEarly:!1}),ee(!0),B(),ne({to:H}).then(()=>{h({type:"success",message:P({id:(0,o.Z)("Settings.email.plugin.notification.test.success"),defaultMessage:"Email test succeeded, check the {to} mailbox"},{to:H})})}).catch(()=>{h({type:"warning",message:P({id:(0,o.Z)("Settings.email.plugin.notification.test.error"),defaultMessage:"Failed to send a test mail to {to}"},{to:H})})}).finally(()=>{ee(!1),F()})}catch(k){d((0,u.getYupInnerErrors)(k))}});return T?e.createElement(f.o,{labelledBy:"title","aria-busy":"true"},e.createElement(X,null),e.createElement(M.D,null,e.createElement(u.LoadingIndicatorPage,null))):e.createElement(f.o,{labelledBy:"title","aria-busy":_},e.createElement(X,null),e.createElement(M.D,null,e.createElement("form",{onSubmit:me},e.createElement(R.K,{spacing:7},e.createElement(I.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(a,{config:ce})),e.createElement(I.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(R.K,{spacing:4},e.createElement(y.Z,{variant:"delta",as:"h2"},P({id:(0,o.Z)("Settings.email.plugin.title.test"),defaultMessage:"Test email delivery"})),e.createElement(b.r,{gap:5,alignItems:"end"},e.createElement(m.P,{col:6,s:12},e.createElement(D.o,{id:"test-address-input",name:"test-address",onChange:pe,label:P({id:(0,o.Z)("Settings.email.plugin.label.testAddress"),defaultMessage:"Recipient email"}),value:H,error:((n=O.email)==null?void 0:n.id)&&P({id:(0,o.Z)(`${(v=O.email)==null?void 0:v.id}`),defaultMessage:"This is an invalid email"}),placeholder:P({id:(0,o.Z)("Settings.email.plugin.placeholder.testAddress"),defaultMessage:"ex: developer@example.com"})})),e.createElement(m.P,{col:7,s:12},e.createElement(c.z,{loading:_,disabled:!de,type:"submit",startIcon:e.createElement(g.Z,null)},P({id:(0,o.Z)("Settings.email.plugin.button.test-email"),defaultMessage:"Send test email"}))))))))))},oe=re},49066:(U,L,t)=>{t.d(L,{D:()=>u});var e=t(67294),x=t(45697),s=t(35961);const u=({children:f})=>e.createElement(s.x,{paddingLeft:10,paddingRight:10},f);u.propTypes={children:x.node.isRequired}},67838:(U,L,t)=>{t.d(L,{T:()=>o});var e=t(67294),x=t(27821),s=t(45697),u=t(72735),f=t(35961),M=t(46273);const R=a=>{const l=(0,e.useRef)(null),[r,i]=(0,e.useState)(!0),E=([C])=>{i(C.isIntersecting)};return(0,e.useEffect)(()=>{const C=l.current,Z=new IntersectionObserver(E,a);return C&&Z.observe(l.current),()=>{C&&Z.disconnect()}},[l,a]),[l,r]};var I=t(98402);const b=(a,l)=>{const r=(0,I.useCallbackRef)(l);(0,e.useLayoutEffect)(()=>{const i=new ResizeObserver(r);return Array.isArray(a)?a.forEach(E=>{E.current&&i.observe(E.current)}):a.current&&i.observe(a.current),()=>{i.disconnect()}},[a,r])};var m=Object.defineProperty,y=Object.defineProperties,D=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,S=(a,l,r)=>l in a?m(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,A=(a,l)=>{for(var r in l||(l={}))p.call(l,r)&&S(a,r,l[r]);if(c)for(var r of c(l))g.call(l,r)&&S(a,r,l[r]);return a},G=(a,l)=>y(a,D(l)),Y=(a,l)=>{var r={};for(var i in a)p.call(a,i)&&l.indexOf(i)<0&&(r[i]=a[i]);if(a!=null&&c)for(var i of c(a))l.indexOf(i)<0&&g.call(a,i)&&(r[i]=a[i]);return r};const J=()=>{const a=(0,e.useRef)(null),[l,r]=(0,e.useState)(null),[i,E]=R({root:null,rootMargin:"0px",threshold:0});return b(i,()=>{i.current&&r(i.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&r(a.current.getBoundingClientRect())},[a]),{containerRef:i,isVisible:E,baseHeaderLayoutRef:a,headerSize:l}},o=a=>{const{containerRef:l,isVisible:r,baseHeaderLayoutRef:i,headerSize:E}=J();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:E==null?void 0:E.height},ref:l},r&&e.createElement(j,A({ref:i},a))),!r&&e.createElement(j,G(A({},a),{sticky:!0,width:E==null?void 0:E.width})))};o.displayName="HeaderLayout";const Q=(0,x.default)(f.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${a=>a.width}px;
  z-index: 4;
  box-shadow: ${({theme:a})=>a.shadows.tableShadow};
`,j=e.forwardRef((a,l)=>{var r=a,{navigationAction:i,primaryAction:E,secondaryAction:C,subtitle:Z,title:N,sticky:z,width:V}=r,W=Y(r,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const $=typeof Z=="string";return z?e.createElement(Q,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:V,"data-strapi-header-sticky":!0},e.createElement(M.k,{justifyContent:"space-between"},e.createElement(M.k,null,i&&e.createElement(f.x,{paddingRight:3},i),e.createElement(f.x,null,e.createElement(u.Z,A({variant:"beta",as:"h1"},W),N),$?e.createElement(u.Z,{variant:"pi",textColor:"neutral600"},Z):Z),C?e.createElement(f.x,{paddingLeft:4},C):null),e.createElement(M.k,null,E?e.createElement(f.x,{paddingLeft:2},E):void 0))):e.createElement(f.x,{ref:l,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:i?6:8,background:"neutral100","data-strapi-header":!0},i?e.createElement(f.x,{paddingBottom:2},i):null,e.createElement(M.k,{justifyContent:"space-between"},e.createElement(M.k,null,e.createElement(u.Z,A({as:"h1",variant:"alpha"},W),N),C?e.createElement(f.x,{paddingLeft:4},C):null),E),$?e.createElement(u.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},Z):Z)});j.displayName="BaseHeaderLayout",j.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},j.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,sticky:s.bool,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired,width:s.number},o.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},o.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired}},185:(U,L,t)=>{t.d(L,{o:()=>D});var e=t(67294),x=t(45697),s=t(27821),u=Object.defineProperty,f=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,I=(c,p,g)=>p in c?u(c,p,{enumerable:!0,configurable:!0,writable:!0,value:g}):c[p]=g,b=(c,p)=>{for(var g in p||(p={}))M.call(p,g)&&I(c,g,p[g]);if(f)for(var g of f(p))R.call(p,g)&&I(c,g,p[g]);return c},m=(c,p)=>{var g={};for(var S in c)M.call(c,S)&&p.indexOf(S)<0&&(g[S]=c[S]);if(c!=null&&f)for(var S of f(c))p.indexOf(S)<0&&R.call(c,S)&&(g[S]=c[S]);return g};const y=s.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,D=c=>{var p=c,{labelledBy:g}=p,S=m(p,["labelledBy"]);const A=g||"main-content-title";return e.createElement(y,b({"aria-labelledby":A,id:"main-content",tabIndex:-1},S))};D.defaultProps={labelledBy:void 0},D.propTypes={labelledBy:x.string}},23293:(U,L,t)=>{t.d(L,{Z:()=>I});var e=t(67294),x=Object.defineProperty,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,M=(b,m,y)=>m in b?x(b,m,{enumerable:!0,configurable:!0,writable:!0,value:y}):b[m]=y,R=(b,m)=>{for(var y in m||(m={}))u.call(m,y)&&M(b,y,m[y]);if(s)for(var y of s(m))f.call(m,y)&&M(b,y,m[y]);return b};function I(b){return e.createElement("svg",R({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b),e.createElement("path",{d:"M0 2.8A.8.8 0 01.8 2h22.4a.8.8 0 01.8.8v2.71a1 1 0 01-1 1H1a1 1 0 01-1-1V2.8z",fill:"#32324D"}),e.createElement("path",{d:"M1.922 7.991C.197 6.675 0 6.252 0 5.289h23.953c.305 1.363-1.594 2.506-2.297 3.125-1.953 1.363-6.253 4.36-7.828 5.45-1.575 1.09-3.031.455-3.562 0-2.063-1.41-6.62-4.557-8.344-5.873zM22.8 18H1.2c-.663 0-1.2.471-1.2 1.053v1.894C0 21.529.537 22 1.2 22h21.6c.663 0 1.2-.471 1.2-1.053v-1.894c0-.582-.537-1.053-1.2-1.053z",fill:"#32324D"}),e.createElement("path",{d:"M0 9.555v10.972h24V9.554c-2.633 1.95-8.367 6.113-9.96 7.166-1.595 1.052-3.352.438-4.032 0L0 9.555z",fill:"#32324D"}))}}}]);
